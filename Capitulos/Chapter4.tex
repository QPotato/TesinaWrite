\chapter{Resultados}  \label{cap:aportes}

\section{Equivalencia de las disntitas definiciones}

Como mencionamos en la sección \ref{sec:def:fp}, existen dos formas de definir el juego ficticio entre los distintos autores de la literatura. Ambas simplifican de distintas formas la definición original de Brown y si bien son similares, su equivalencia no es inmediatamente evidente, por lo que uno podría dudar de si un teorema expresado para una de las definiciones es válido con la otra. Por lo tanto, presentamos a continuación dos lemas sobre esta equivalencia, para el caso simultaneo y alternante respesctivamente. La idea será probar que los historiales de la definición \ref{def:fp:brandt} suman en cada iteracion la estrategia pura correspondiente a la acción elegida por la definicion \ref{def:fp:berger}. Comenzamos con el caso simulaneo.

\begin{lemma} \label{lema:equiv:sim}
    % i^k jugada del jugador fila en tiempo t
    % j^k jugada del jugador columna en tiempo t
    % y^k creencias del jugador fila sobre la estrategia del jugador columna en tiempo t
    % x^k creencias del jugador columna sobre la estrategia del jugador fila en tiempo t
    % p^k historial de jugadas del jugador fila
    % q^k historial de jugadas del jugador columna
    Sea $(A, B)$ un juego en forma bimatricial de $n \times m$, $(\pstrat{i^\tau}, \pstrat{j^\tau})_{\tau \in \mathbb{N}}$ una secuencia de juego ficticio simultaneo (según la definicioón \ref{def:fp:berger}) con secuencias de creencias $y^\tau$, $x^\tau$ y sea $(p^\tau, q^\tau)_{\tau \in \mathbb{N}}$ una secuencia de juego ficticio simultaneo (según la definicion \ref{def:fp:brandt}), tales que $p^1 = \pstrat{i^1}$, $q^1 = \pstrat{j^1}$ y ambas usan la misma regla de desempate. Entonces, $(i^\tau, j^\tau)_{\tau \in \mathbb{N}}$ y $(p^\tau, q^\tau)_{\tau \in \mathbb{N}}$ representan el mismo proceso de aprendizaje. Es decir, $\forall \tau \in \mathbb{N}$, se cumplen:

    \[ p^{\tau} = \sum_{s=1}^\tau{\pstrat{i^s}} \]
    \[ q^{\tau} = \sum_{s=1}^\tau{\pstrat{j^s}} \]

\end{lemma}
\begin{proof}
    Procederemos por inducción sobre $\tau$.

    Para $\tau = 1$, tenemos $p^1 = \pstrat{i^1} = \sum_{s=1}^1{\pstrat{i^s}}$ y $q^1 = \pstrat{j^1} = \sum_{s=1}^1{\pstrat{j^s}}$.

    Veamos ahora el caso de un $\tau = k > 1$, suponiendo que \todo{aca tengo duda de si es mejor suponer k y probar para k+1}$p^{k-1} = \sum_{s=1}^{k-1}{\pstrat{i^s}}$ y $q^{k-1} = \sum_{s=1}^{k-1}{\pstrat{j^s}}$. Por la definición \ref{def:fp:brandt}, $p^k = p^{k-1} + \pstrat{i}$ donde $i$ es un índice de una componente máxima de $Aq^{k-1} = A\sum_{s=1}^{k-1}{\pstrat{j^s}}$. Pero también sabemos, por la definición \ref{def:fp:berger} que $i^k \in BR_1(y^{k-1}) = BR_1(\frac{\sum_{s=1}^{k-1} \pstrat{j^s}}{k-1}) = \{i \in N : (A\frac{\sum_{s=1}^{k-1} \pstrat{j^s}}{k-1})_p = \max_{i' \in N} (A\frac{\sum_{s=1}^{k-1} \pstrat{j^s}}{k-1})_{i'}\}$. Es decir que $i^k$ es el índice de una componente máxima de $A\frac{q^{k-1}}{k-1}$. Como escalar un vector no afecta la relación de orden entre sus componentes, podemos afirmar que también es una componente máxima de $Aq^{k-1}$ \todo{lo del escalado esta bien?}. Incluso si hubiera otras componentes máximas, estamos usando en ambos procesos la misma regla de desempate. Luego, $p^k = p^{k-1} + \pstrat{i^k} = \sum_{s=1}^{k-1}{\pstrat{i^s}} + \pstrat{i^k} = \sum_{s=1}^{k}{\pstrat{i^s}}$. Análogamente, podemos afirmar que $q^{k} = \sum_{s=1}^k{\pstrat{j^s}}$.
\end{proof}

El caso alternante es un poco más complejo ya que el caso del jugador columna ya no es análogo al del jugador fila.

\begin{lemma}
    % i^k jugada del jugador fila en tiempo t
    % j^k jugada del jugador columna en tiempo t
    % y^k creencias del jugador fila sobre la estrategia del jugador columna en tiempo t
    % x^k creencias del jugador columna sobre la estrategia del jugador fila en tiempo t
    % p^k historial de jugadas del jugador fila
    % q^k historial de jugadas del jugador columna
    Sea $(A, B)$ un juego en forma bimatricial de $n \times m$, $(i^\tau, j^\tau)_{\tau \in \mathbb{N}}$ una secuencia de juego ficticio alternante (según la definicioón \ref{def:fp:berger}) con secuencias de creencias $y^\tau$, $x^\tau$ y sea $(p^\tau, q^\tau)_{\tau \in \mathbb{N}}$ una secuencia de juego ficticio alternante (según la definicion \ref{def:fp:brandt}), tales que $p^1 = \pstrat{i^1}$ y ambas usan la misma regla de desempate. Entonces, $(i^\tau, j^\tau)_{\tau \in \mathbb{N}}$ y $(p^\tau, q^\tau)_{\tau \in \mathbb{N}}$ representan el mismo proceso de aprendizaje. Es decir, para todo $\tau \in \mathbb{N}$, se cumplen:

    \[ p^{\tau} = \sum_{s=1}^\tau{\pstrat{i^s}} \]
    \[ q^{\tau} = \sum_{s=1}^\tau{\pstrat{j^s}} \]

\end{lemma}
\begin{proof}
    Nuevamente, procederemos por inducción sobre $\tau$.

    Para $\tau = 1$, sabemos que $p^1 = \pstrat{i^1} = \sum_{s=1}^1{\pstrat{i^s}}$. Por la definición \ref{def:fp:brandt}, $q^1 = q^0 + \pstrat{j}$ donde $q^0$ es el vector nulo y $j$ es el índice de una componente máxima de $p^{1}B = \pstrat{i^1}B$ y, por la definición \ref{def:fp:berger}, sabemos que $j^1 \in BR_2(x^1) = BR_2(\frac{\sum^1_{s=1} \pstrat{i^s}}{\tau}) = BR_2(i^1) = \{j \in N : (i^{1}B)_j = \max_{j' \in M} (i^{1}B)_{j'}\}$. Es decir, $j^1$ es el índice de una componente máxima de $i^{1}B$. Luego, $q^1 = \pstrat{j^1} = \sum_{s=1}^1{\pstrat{j^s}}$.

    Veamos ahora el caso de un $\tau = k > 1$, suponiendo que $p^{k-1} = \sum_{s=1}^{k-1}{\pstrat{i^s}}$ y $q^{k-1} = \sum_{s=1}^{k-1}{\pstrat{j^s}}$. Podemos afirmar, con el mismo argumento que en el caso inductivo del lema \ref{lema:equiv:sim} que $p^{k} = \sum_{s=1}^k{\pstrat{i^s}}$. Por otro lado, $q^{k} = y^{k} + \pstrat{j}$ donde $j$ es el índice de una componente máxima de $p^{k}B = \sum_{s=1}^k{\pstrat{i^s}}B$. Sabemos además, por la definición \ref{def:fp:berger}, que $j^k \in BR_2(x^{k}) = BR_2(\frac{\sum_{s=1}^{k}{\pstrat{i^s}}}{k}) = \{j \in N : (\frac{\sum_{s=1}^{k}{\pstrat{i^s}}}{k}B)_j = \max_{j' \in M} (\frac{\sum_{s=1}^{k}{\pstrat{i^s}}}{k}B)_{j'}\}$. Es decir que $j^k$ es el índice de una componente máxima de $\frac{p^k}{k}B$. Como escalar un vector no afecta la relación de orden entre sus componentes, podemos afirmar que también es una componente máxima de $p^{k}B$. Como ambos procesos desempatan igual, podemos afirmar entonces que $q^k = q^{k-1} + j^k = \sum_{s=1}^{k-1}{\pstrat{j^s}} + j^k = \sum_{s=1}^{k}{\pstrat{j^s}}$.

\end{proof}

\section{Convergencia de Juego Ficticio}

En su publicación de 1997, Monderer y Sela \cite{no:cycling} enuncian un resultado que nos da una intuición interesante sobre el comportamiento del juego ficticio. Al ser el este un mecanismo utilizado para encontrar equilibrios de Nash, uno esperaría observar un comportamiento estable alrededor de los mismo. Monderer y Sela llaman a esto el Principio de Estabilidad. La demostración que presentan es mediante otros principios y conceptos que presentan en esa publicación, pero este resultado puede probarse de forma más directa. Presentamos entonces a continuación una demostración alternativa. Agregamos además, una prueba para el caso del juego ficticio alternante.\todo{mejor?}

\begin{theorem}
    % Cambiar a definicion estilo Berger
    Sea $(i^\tau, j^\tau)_{\tau \in \mathbb{N}}$ una secuencia de aprendizaje de juego ficticio simultaneo en el juego en forma bimatricial $(A, B)$ de tamaño $n \times m$, con secuencias de creencias $(x^t, y^t)_{\tau \in \mathbb{N}}$. Si en la iteración $k$ se juega el perfil de estrategias $(i*, j*)$ y este es un equilibrio de Nash puro, entonces $(i*, j*)$ será también el perfil jugado en todas las iteraciones posteriores.
    % \N tiene al 0? xd
\end{theorem}

\begin{proof}
    Si en la iteracion $k$ se jugó el perfil $(i^*, j^*)$, por la definición \ref{def:fp:berger}, sabemos que $i^* \in BR_1(y^{k-1})$ y $j^* \in BR_1(x^{k-1})$. Sabemos también, por la definición de equilibrio de Nash, que $i^* \in BR_1(\pstrat{j^*})$ y $j^* \in BR_2(\pstrat{i^*})$.

    Veamos entonces que sucederá en la iteración $k+1$. Las creencias se actualizaran como

    \[
        x^k = \frac{\sum_{s=1}^{k-1}{\pstrat{i^s}} + \pstrat{i^*}}{k}
            = \frac{\sum_{s=1}^{k-1}{\pstrat{i^s}}}{k} + \frac{\pstrat{i^*}}{k}
            = \frac{\sum_{s=1}^{k-1}{\pstrat{i^s}}(k-1)}{k(k-1)} + \frac{\pstrat{i^*}}{k}
            = \frac{k - 1}{k} x^{k-1} + \frac{\pstrat{i^*}}{k}
    \]
    % \todo{estas son las formulas de Berger en Brown's Original que las tira como alternativas pero no las demuestra}
    \[
        y^k = \frac{\sum_{s=1}^{k-1}{\pstrat{j^s}} + \pstrat{j^*}}{k}
            = \frac{\sum_{s=1}^{k-1}{\pstrat{j^s}}}{k} + \frac{\pstrat{j^*}}{k}
            = \frac{\sum_{s=1}^{k-1}{\pstrat{j^s}}(k-1)}{k(k-1)} + \frac{\pstrat{j^*}}{k}
            = \frac{k - 1}{k} y^{k-1} + \frac{\pstrat{j^*}}{k}
    \]

    Luego, tendremos que

    \begin{align*}
        BR_1(y^k) &= BR_1(\frac{k - 1}{k} y^{k-1} + \frac{j^*}{k}) \\
        &= \{i \in N : (A(\frac{k - 1}{k} y^{k-1} + \frac{j^*}{k}))_i = \max_{i' \in N} (A(\frac{k - 1}{k} y^{k-1} + \frac{j^*}{k}))_i'\}\\
        &= \{i \in N : (\frac{k - 1}{k} Ay^{k-1} + \frac{Aj^*}{k})_i = \max_{i' \in N} (\frac{k - 1}{k} Ay^{k-1} + \frac{Aj^*}{k})_i'\}
    \end{align*}

    Como sabemos que $i^*$ es indice máximo tanto de $Ay^{k-1}$ como de $Aj^*$, podemos afirmar que lo es también de esta combinación lineal de ambos \todo{este argumento?} y por tanto que $i^* \in BR_1(y^k)$. Analogamente, $j^* \in BR_1(x^k)$. Por lo tanto, por la definición de juego ficticio, en la iteración $k$ se jugará nuevamente $(i^*, j^*)$ y este proceso se repetirá infinitamente \todo{que hacer aca con empates? agregar en el enunciado que haya un solo equilibrio?}.

\end{proof}

\begin{theorem}
    % Cambiar a definicion estilo Berger
    Sea $(i^\tau, j^\tau)_{\tau \in \mathbb{N}}$ una secuencia de aprendizaje de juego ficticio alternante en el juego en forma bimatricial $(A, B)$ de tamaño $n \times m$, con secuencias de creencias $(x^t, y^t)_{\tau \in \mathbb{N}}$. Si en la iteración $k$ se juega el perfil de estrategias $(i*, j*)$ y este es un equilibrio de Nash puro, entonces $(i*, j*)$ será también el perfil jugado en todas las iteraciones posteriores.
    % \N tiene al 0? xd
\end{theorem}

\begin{proof}
    asd \todo{creo que sale parecida a la simultanea, pero quiero ver bien esa antes de probar esta}
\end{proof}

\section{Velocidad de Convergencia de AFP}

En esta sección nos enfocaremos en estudiar más detalladamente los resultados de Brandt, Fischer y Harrenstein \cite{brandt:rate:convergence}. Como dijimos en el capítulo \ref{cap:relwork}, los autores mencionan la posibilidad de expandir sus resultados a la variante alternante de juego ficticio. Presentamos a continuación nuestro análisis para los casos de los juegos de suma constante simétricos y los no degenerados de $2 \times 3$.


Veamos primero que para el caso de los juegos de suma constante simétricos, el teorema de estos autores efectivamente es expandible de forma bastante directa a la variante alternante.

\begin{theorem}
    En juegos de suma constante simétricos de dos jugadores, un proceso de juego ficticio alternante puede requerir una cantidad exponencial (en el tamaño de representación en bits de los valores de las utilidades del juego) de rondas antes de que un equilibrio sea jugado.
\end{theorem}

\begin{proof}
    Consideremos un juego en forma normal con la siguiente matriz de pagos:

    \input{Tablas/matrizTeo1.tex}

    Si $\epsilon < 1$, vemos que $(a^3, a^3)$ es el único equilibrio de Nash puro por ser el único perfil restante luego de realizar eliminación iterada de estrategias estrictamente dominadas.

    Consideremos un número $k > 1$ arbitrario y sea $\epsilon = 2^{-k}$. Para estos valores, $\epsilon$ puede codificarse en $O(k)$ bits, mientras que las otras utilidades del juego son constantes, por lo que podemos afirmar que la representación del juego será tambien del orden de  $O(k)$ bits. Por lo tanto, si probamos que un proceso de juego ficticio alternante puede requerir $2^k$ rondas antes de que se juegue $(a^3, a^3)$, el teorema estará demostrado.

    Si el proceso de AFP comienza con el jugador fila jugando $a^1$, entonces $x^1Q = (0, 1, 2^{-k})$ y por lo tanto el jugador columna elegirá $a_2$.

    Luego, en las siguentes $2^k - 1$ rondas tendremos que $Py^i = (-i + 1, 0, 2^{-k}i)$ y $x^{i+1}Q = (-2^{-k}i, 1 - 2^{-k}i, 2^{-k})$.Claramente, el jugador fila elegirá $a^3$. Por su parte, como $1 - 2^{-k}i \ge 2^{-k}$, el jugador columna jugará $a^2$ en la ronda $i + 1$.

    La siguiente tabla muestra como se desarrolla este proceso:

    \input{Tablas/tablaTeo1.tex}

    Por lo tanto, la secuencia

    \begin{center}
    \begin{math}
        (a^1, a^2), \underbrace{(a^3, a^2), ... (a^3, a^2)}_{\text{$2^k - 1$ veces}}
    \end{math}
    \end{center}

    es una secuencia de aprendizaje de juego ficticio alternante válida de este juego que es exponencialmente larga en $k$ y en la cúal no se juega ningún equilibrio.
\end{proof}

Por su parte, la demostración para el caso de los juegos no degenerados de $2 \times 3$ es un poco menos directa y requiere plantear una ligera variante del juego originalmente propuesto por Brandt, Fischer y Harrenstein.

\begin{theorem}
    En juegos no degenerados de $2 \times 3$, un proceso de juego ficticio alternante puede requerir una cantidad exponencial (en el tamaño de representación en bits de los valores de las utilidades del juego) de rondas antes de que un equilibrio sea jugado.
\end{theorem}

\begin{proof}
    Consideremos un juego con la siguiente matriz de pagos:

    \input{Tablas/matrizTeo2.tex}

    Si $\epsilon < 1$, vemos que $(a^2, b^3)$ es el único equilibrio de Nash puro
    por ser el único perfil restante luego de realizar eliminación iterada de estrategias estrictamente dominadas.

    Consideremos un número $k > 1$ arbitrario. Mostraremos que para $\epsilon = 2^{-k}$, un proceso de juego ficticio alternante puede tomar $2^k$ rondas antes de que se juegue $(a^2, b^3)$. Al igual que en el teorema anterior, el juego puede codificarse en $O(k)$ bits, por lo que esto demuestra el teorema.

    Si el proceso de AFP comienza con el jugador fila jugando $a^1$, entonces $x^1Q = (1, 2, 0)$ y por lo tanto el jugador columna elegirá $a_2$.

    Luego, en las siguentes $2^k - 1$ rondas tendremos que $Py^i = (2i, (2+2^{-k})i)$ y $x^{i+1}Q = (1, 2+(2+2^{-k})i, (2+2^{-k+1})i)$. Claramente, el jugador fila elegirá $a^2$. Por su parte, como $2+(2+2^{-k})i \ge (2+2^{-k+1})i$, el jugador columna jugará $b^3$ en la ronda $i + 1$.

    La siguiente tabla muestra como se desarrolla este proceso:

    \input{Tablas/tablaTeo2.tex}

    Por lo tanto, la secuencia

    \begin{center}
    \begin{math}
        (a^1, b^2), \underbrace{(a^2, b^2), ... (a^2, b^2)}_{\text{$2^k - 1$ veces}}
    \end{math}
    \end{center}

    es una secuencia de aprendizaje de juego ficticio alternante válida de este juego que es exponencialmente larga en $k$ y en la cúal no se juega ningún equilibrio.

\end{proof}

El detalle de que el juego originalmente propuesto por Brandt, Fischer y Harrenstein no nos sirva para demostrar el teorema anterior no es para nada menor. En efecto, como veremos en el siguiente teorema, es un ejemplo de un juego en el un proceso de juego ficticio simultaneo puede requerir una cantidad de rondas exponenciales mientras que, toda secuencia de juego ficticio alternante convergerá rápidamente.

\begin{theorem}
    Existe un juego para el cuál un proceso de juego ficticio simultaneo puede requerir una cantidad exponencial (en el tamaño de representación en bits de los valores de las utilidades del juego) de rondas antes de que un equilibrio sea jugado, mientras que en todo proceso de juego ficticio alternado se jugará un equilibrio en una cantidad de rondas acotada por una constante.
\end{theorem}


\begin{proof}
    Consideremos el juego con la siguiente matriz de pagos:

    \input{Tablas/matrizTeo3.tex}

    Al igual que en los teoremas, si $\epsilon < 1$, $(a^2, b^3)$ es el único equilibrio de Nash puro por ser el único perfil restante luego de realizar eliminación iterada de estrategias estrictamente dominadas.

    % Si consideremos un número $k > 1$ arbitrario. Mostraremos que para $\epsilon = 2^{-k}$, un proceso de juego ficticio alternante puede tomar $2^k$ rondas antes de que se juegue $(a^2, a^3)$. Al igual que los teoremas anteriores, el juego puede codificarse en $O(k)$ bits.

    % Setup parecido a los otros

    % Caso particular en SFP, como en Brandt

    % AFP converge al toque
      % por fila
    Veamos ahora el caso alternante. Existen dos posibles secuencias de juego ficticio alternante para este juego, dado que el jugador fila elegirá primero y el jugador columna reaccionara según esta decisión.

    Si el jugador fila juega $a^2$, el jugador columna responderá con $b^3$, siendo este el equilibrio.
    Si el jugador fila juega $a^1$, el jugador columna respondera con $b^2$. Esto hará que el jugador fila juegue $a^2$ en la siguiente ronda por ser $Py^i = $, mientras que el jugador continuará fila continuara jugando $b^2$. Esta situacion se repetirá una ronda más, tras la cuál, la jugador columna se verá incentivado a jugar $b^3$.


\end{proof}
% TODO: Demostracion