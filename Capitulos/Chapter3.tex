\chapter{Conceptos previos}  \label{cap:previos}

\section{Juegos bimatriciales y equilibrios de Nash}

% Comenzaremos dando una definición de juego estratégico adaptada de \cite{libro:rubinstein}:
% % Tomada de Osbourne & Rubinstein
% \begin{definition}
%     Un \concept{juego estrategico} consiste en
%     \begin{itemize}
%         \item Un conjunto finito $N$ (el conjunto de \concept{jugdores}).
%         \item Para cada jugador $i \in N$, un conjunto no vacío $A_i$ (el conjunto de \concept{acciones} disponibles). Notamos con $A$ al conjunto $ $ y llamamos \concept{perfil} de acciones a sus elementos.
%         % TODO: producto cartesiano en todos los indices
%         \item Para cada jugador $i \in N$, una \concept{función de pagos} $u_i : A \rightarrow \R$ que a cada perfil de acciones $a$ le asigna un valor real que llamaremos la \concept{ganancia} o \concept{pago} del perfil $a$ para el jugador $i$.
%     \end{itemize}
% \end{definition}

% En este trabajo, nos enfocaremos en los juegos estratégicos de dos jugadores. Suponiendo $N = \{1, 2\}$ Estos juegos pueden expresarse de manera compacta en \concept{forma normal} mediante un par de matrices $(A, B)$ tales que $A_{ij} = u_1(a_i)

% Definición de bimatricial tomada de Brown's original
Sea $(A, B)$ un juego en forma bimatricial de $n \times m$, es decir un juego de dos jugadores finito en el que el jugador $1$ (jugador fila) tiene acciones $i \in N = \{i_1, i_2, \dots, i_n\}$ y el jugador $2$ (jugador columna) tiene acciones $j \in M = \{j_1, j_2, \dots, j_m\}$. $A$, $B \in \mathbb{R}^{n \times m}$ son las matrices de pago de los jugadores $1$ y $2$. Si el jugador $1$ elige la acción $i$ y el jugador $2$ elige la acción $j$, la ganancia del jugador $1$ será $a_{i,j}$ y la ganancia del jugador $2$ será $b_{i,j}$. Describiremos los juegos en forma bimatricial con una matriz de pares como la siguiente:

\input{Tablas/matrizDefJuegosBimatriciales.tex}

% Estrategias mixtas como vectores en conjunto delta
Notaremos con $\Delta(X)$ al espacio de probabilidades sobre el conjunto $X$ y llamaremos \concept{estrategias mixtas} a los vectores de la forma $x \in \Delta(N)$ y $y \in \Delta(M)$. A las estrategias que asignan probabilidad $1$ a una acción y $0$ a todas las otras, las llamaremos \concept{estrategias puras}. Notaremos con $\pstrat{h}$ a la estrategia pura correspondiente a la acción $h$.

% Ganancia esperada como producto de matriz por vector
La ganancia esperada del jugador $1$ al jugar la acción $i$ contra la estrategia mixta $y$ del jugador $2$ será $\pstrat{i}Ay$. Análogamente, la ganancia esperada del jugador $2$ al jugar la acción $j$ contra la estrategia mixta $x$ del jugador $2$ será $xB\pstrat{j}$. Si ambos jugadores juegan las estrategias mixtas $x$ e $y$ respectivamente, sus ganancias esperadas pueden calcularse como $xAy$ para el jugador $1$ e $yB^tx$ para el jugador $2$.

% Mejor Respuesta
Si $y$ es una estrategia mixta del jugador $2$, definimos el \concept{conjunto de mejores respuestas} a $y$ como $BR_1(y) = argmax_{i \in N}\{\pstrat{i}Ay\}$ y, análogamente, si $x$ es una estrategia mixta del jugador $2$, el conjunto de mejores respuestas a $x$ será $BR_2(x) = argmax_{j \in M}\{xB\pstrat{j}\}$. Es decir, son los conjuntos de índices que maximizan las ganancias esperadas contra una estrategia dada.

% Mejor Respuesta en mixtas
Este concepto puede expandirse de índices a estrategias mixtas. Si $x$ es una estrategia mixta del jugador 1 e $y$ es una estrategia mixta del jugador 2, decimos que $x \in BR_1(y)$ si $\forall i \in N, x_i > 0 \implies i \in BR_1(y)$.

% Equilibrios de Nash mixtos y puros
Llamaremos \concept{equilibrio de Nash} a todo perfil de estrategias mixtas $(x^*, y^*) \in \Delta(A) \times \Delta(B)$ tal que $x^* \in BR_1(y^*)$ e $y^* \in BR_2(x^*)$. En el caso particular de que las estrategias sean puras, al equilibrio lo llamaremos también \concept{equilibrio de Nash puro}.

\section{Categorías de juegos}

% Intro categorías
Es útil clasificar a los juegos en distintas categorías según sus propiedades. Presentamos a continuación algunas de las categorías de juegos mas estudiadas en la literatura sobre juego ficticio.

\begin{definition}
    Un juego $(A, B)$ de tamaño $n \times m$ es un \concept{juego de suma cero} si $\forall i \in N, j \in M : a_{ij} = -b_{ij}$. Para estos casos, nos referiremos al juego usando solo la matriz $A$.
\end{definition}

Los juegos de suma cero son una de las categorías más estudiadas en teoría de juegos. Representan los juegos en los que un jugador siempre gana tanto como pierde el otro. Uno de los teoremas fundacionales del área, conocido como el Teorema de Minimax \cite{nash:minimax} establece que todos poseen al menos un equilibrio de Nash puro y a la ganancia para el jugador fila en un equilibrio la llamamos \concept{valor del juego} (pues es la misma en todos los equilibrios).

\begin{definition}
    Llamamos \concept{degenerado} a un juego bimatricial $(A, B)$ de tamaño $n \times m$ si se cumple alguna de las siguientes condiciones:
    \begin{itemize}
        \item Existen $i, i' \in N$ y $j \in M$ con $i \neq i$' tales que $a_{ij} = a_{i'j}$
        \item Existen $j, j' \in M$ e $i \in N$ con $j \neq j$' tales que $b_{ij} = b_{ij'}$
    \end{itemize}
    En caso contrario, decimos que el juego es \concept{no degenerado}.
\end{definition}
Los juegos no degenerados son de particular interés porque capturan el concepto de un juego en el que, para cada acción del rival, no existen dos acciones con el mismo pago. Por lo tanto, el conjunto de mejor respuesta contra una acción dada es siempre unitario.

Las siguientes definiciones corresponden a otras dos categorías de juegos que han sido muy estudiados por sus propiedades de convergencia en los procesos de juego ficticio. Nos serán útiles en la sección \ref{sec:aportes:velocidad} cuando discutamos los resultados sobre su velocidad de convergencia.

\begin{definition}
    Un juego bimatricial $(A, B)$ de tamaño $n \times n$ es un \concept{juego simétrico} si $\forall i, j \in N : a_{ij} = -b_{ji}$
\end{definition}

\begin{definition}
    Un juego $(A, B)$ de tamaño $n \times m$ es un \concept{juego de intereses idénticos} si $\forall i \in N, j \in M : a_{ij} = b_{ij}$. En este caso también nos referiremos al juego usando solo la matriz $A$.
\end{definition}

\falta{aca pueden ir comentarios sobre cuales de los juegos ejemplo caen en cuales categorías}

\section{Juego ficticio} \label{sec:def:fp}

El algoritmo de juego ficticio consiste en una repetición iterada de un juego en la que en cada instancia los jugadores juegan una jugada que sea mejor respuesta a al historial de jugadas de su oponente, tomada como una distribución empírica. En esta sección presentaremos dos definiciones formales que podemos encontrar en la literatura sobre juego ficticio, a las cuales incorporaremos el concepto de \concept{reglas de desempate}. Este concepto nos permitirá precisar las definiciones, removiendo una ambigüedad que ocurre en los casos en los que los conjuntos de mejor respuesta no son unitarios.

\begin{definition}
    Llamamos \concept{reglas de desempate} de un juego ficticio a un par de funciones $d_1: \mathbb{P}^+(N) \rightarrow N$ y $d_2: \mathbb{P}^+(M) \rightarrow M$ que a cada subconjunto de acciones de un jugador en un eventual empate le asignan la acción que elegirá el proceso, cumpliendo la condición de Hauthakker:

    \[
        \forall N_a, N_b \in {P}^+(N), \text{ si } N_b \subseteq N_a, i \in N_b \text{ y } d_1(N_a) = i  \text{ entonces } d_1(N_b) = i
    \]
    \[
        \forall M_a, M_b \in {P}^+(M), \text{ si } M_b \subseteq M_a, j \in M_b \text{ y } d_2(M_a) = j  \text{ entonces } d_2(M_b) = j
    \]
\end{definition}

Algunos autores como Berger, Monderer, Sela, Shapley, Daskalakis y Pan \cite{browns:original} \cite{no:cycling} \cite{2x2:without} \cite{identical:interests} \cite{counter:karlin:strong} utilizan una definición del estilo de la siguiente, que resulta cómoda para estudiar convergencia y es la que veremos primero. Presentaremos dos variantes, correspondientes a la versión simultanea y a la alternante.

\begin{definition} \label{def:fp:berger}
    Sean $(A, B)$ un juego en forma bimatricial de $n \times m$ y una secuencia $(i^\tau, j^\tau)$ con $i^\tau \in N$, $j^\tau \in M$ para todo $\tau \in \mathbb{N}$. Si $d_1$ y $d_2$ son reglas de desempate y tenemos unas secuencias de creencias $x^\tau$ e $y^\tau$ tales que para todo $\tau \in \mathbb{N}$:
    \begin{gather*}
        x^\tau= \frac{\sum^\tau_{s=1} \pstrat{i^s}}{\tau}  \\
        y^\tau= \frac{\sum^\tau_{s=1} \pstrat{j^s}}{\tau}
    \end{gather*}
    Entonces:
    \begin{itemize}
        \item $(i^\tau, j^\tau)$ es una secuencia de juego ficticio simultáneo si $(i^1, j^1)$ es un elemento arbitrario de $N \times M$ y para todo $\tau \in \mathbb{N}$ se cumplen $i^{\tau+1} = d_1(BR_1(y^\tau))$ y $j^{\tau+1} = d_2(BR_2(x^\tau))$.
        \item $(i^\tau, j^\tau)$ es una secuencia de juego ficticio alternante si $i^0$ es un elemento arbitrario de $N$ y para todo $\tau \in \mathbb{N}$ se cumplen $i^{\tau+1} = d_1(BR_1(y^\tau))$ y $j^{\tau} = d_2(BR_2(x^\tau))$.
    \end{itemize}
\end{definition}

Vale la pena hacer algunos comentarios sobre esta primera definición. Para empezar, observando las secuencias de creencias, $x^\tau$ e $y^\tau$, veremos que se componen de sumas de vectores unitarios, pero normalizados por el tiempo, por lo que son estrategias mixtas que se corresponden con la distribución empírica de las acciones de cada jugador. Por otro lado, como los elementos iniciales son arbitrarios, un mismo juego puede tener tantos procesos de juego ficticio válidos como jugadas iniciales existan.

Las definiciones que usan autores previamente mencionados establecen una condición mas débil sobre las jugadas, pidiendo solo que pertenezcan al conjunto de menor respuesta a la estrategia mixta percibida. Esto implica, como mencionamos recientemente, que aparecen ambigüedades en los casos en los que el conjunto de menor respuesta no es unitario. Una forma de eliminar esta ambigüedad fue centrarse en el estudio de los juegos no degenerados \cite{browns:original}. En este trabajo, tomamos el enfoque alternativo de eliminar la ambigüedad introduciendo las reglas de desempate.

Sobre la variante alternante vale aclarar que efectivamente, el jugador columna toma su decisión incorporando en sus creencias la información sobre qué jugó el jugador fila en la ronda actual, si bien esto puede resultar poco intuitivo ya que normalmente en teoría de juegos se representa jugadores eligiendo simultánea e independientemente. Otra observación relevante es que su acción inicial no es arbitraria sino que ya se encuentra fijada por la mejor respuesta o mejores respuestas a la acción del jugador fila.

Diremos que un proceso de juego ficticio (simultaneo o alternante) converge de forma pura en la iteración $k$ si $(i^k, j^k)$ es un equilibrio de Nash puro. En el capítulo \ref{cap:aportes} veremos que cuando esto ocurre, $(i^k, j^k)$ se repetirá infinitamente desde este punto en el tiempo. Diremos también que el proceso converge de forma mixta si existe un equilibrio de Nash mixto tal que para todo $\epsilon > 0$ existe un $k \in \mathbb{N}$ tal que $|x^* - x^k| < \epsilon$ y $|y^* - y^k| < \epsilon$.

Alternativamente, Brandt, Fischer y Harrenstein utilizan una definición similar a la de Robinson \cite{robinson:zerosum} pero simplificada. Es más cómoda para estudiar velocidades de convergencia en juegos que se sabe que convergen. A continuación, presentamos también esta definición.

\begin{definition} \label{def:fp:brandt}
    Sea $(A, B)$ un juego en forma bimatricial de $n \times m$:
    \begin{itemize}
        \item Una secuencia de juego ficticio simultaneo en $(A, B)$ es una secuencia $(p^\tau, q^\tau)_{\tau \in \mathbb{N}}$ de pares de vectores no negativos $(p^i, q^i) \in \mathbb{N}^n \times \mathbb{N}^m$ tal que:
        \begin{gather*}
            p^0 = \boldmath{0}, q^0 = \boldmath{0} \\
            p^{\tau+1} = p^{\tau} + \pstrat{i} \text{\ donde $i = d_1(argmax_{i' \in N}\{\pstrat{i'}Aq^\tau\})$} \\
            q^{\tau+1} = q^{\tau} + \pstrat{j} \text{\ donde $j = d_2(argmax_{j' \in M}\{p^{\tau}B\pstrat{j'}\})$}
        \end{gather*}
        \item Una secuencia de juego ficticio alternante en $(A, B)$ es una secuencia $(p^\tau, q^\tau)_{\tau \in \mathbb{N}}$  de pares de vectores no negativos $(x^i, y^i) \in \mathbb{N}^n \times \mathbb{N}^m$ tal que:
        \begin{gather*}
            p^0 = \boldmath{0}, q^0 = \boldmath{0} \\
            p^{\tau+1} = p^{\tau} + \pstrat{i} \text{\ donde $i = d_1(argmax_{i' \in N}\{\pstrat{i'}Aq^\tau\})$} \\
            q^{\tau+1} = q^{\tau} + \pstrat{j} \text{\ donde $j = d_2(argmax_{j' \in M}\{p^{\tau+1}B\pstrat{j'}\})$}
        \end{gather*}
    \end{itemize}
\end{definition}

Como podemos observar, la principal diferencia con la primera definición es que mientras en aquella se define una secuencia de jugadas que cumple una condición contra un historial de creencias sobre la estrategia mixta del otro jugador, en esta la secuencia es de pares de contadores de jugadas (sin normalizar, por lo que no son estrategias mixtas), que cumplen en cada iteración una condición de maximizar el producto de la matriz de pagos contra el contador del rival (sin ser este tampoco la ganancia esperada por no estar el resultado normalizado). En el capítulo \ref{cap:aportes} se demostrará que estas dos definiciones son equivalentes.

% Relación entre distintas convergencias


\section{Ejemplos}

Veamos como se aplican todos estos conceptos a algunos juegos clásicos de la literatura. Comenzaremos por el Dilema de los Prisioneros:


\input{Tablas/matrizDilema.tex}

Este juego es muy estudiado por su propiedad de que si bien la mayor ganancia para ambos jugadores se encuentra en que se juegue el perfil $(i_1, j_1)$, su único equilibrio de Nash puro es el perfil $(i_2, j_2)$. En la tabla \ref{sfp:dilema:prisioneros} podemos observar como se desarrolla un proceso de juego ficticio simultáneo sobre este juego, comenzando desde $(i_1, j_1)$. Para las primeras 5 iteraciones, se muestra el perfil jugado, cómo se actualizan las creencias sobre la estrategia de los jugadores y las consecuentes ganancias esperadas de cada jugador para sus jugadas a lo largo de la secuencia.

\begin{table} % [h!]
    \centering
    \input{Tablas/sfp_pd.tex}
    \caption{Proceso de juego ficticio simultaneo sobre el Dilema del Prisionero}
    \label{sfp:dilema:prisioneros}
\end{table}

Como vemos, si ambos jugadores empiezan cooperando, en la segunda ronda la mejor respuesta individualmente para cada uno será desviarse de este perfil, jugando respectivamente $i_2$ y $j_2$. Las creencias, que como mencionamos previamente son observaciones empíricas de una estrategia mixta supuesta según el historial del oponente, ahora indican que cada jugador juega cada una de las acciones con probabilidad $0,5$. Como veremos en la sección \ref{sec:convergencia:fp}, dado que $(i_2, j_2)$ es un equilibrio de Nash puro, podemos asegurar que se jugará infinitamente.

La tabla \ref{afp:dilema:prisioneros} muestra el mismo juego pero en un proceso de juego ficticio alternante. Como vemos, ya en la primera iteración el jugador $2$ reacciona a $i_1$ jugando $j_2$ como mejor respuesta. El proceso continúa de forma similar, aunque el jugador fila cree que el jugador columna está siguiendo una estrategia pura.

\begin{table} % [h!]
    \centering
    \input{Tablas/afp_pd.tex}
    \caption{Proceso de juego ficticio alternante sobre el Dilema de los Prisioneros}
    \label{afp:dilema:prisioneros}
\end{table}

Pasando al siguiente ejemplo, vemos en esta matriz el clásico juego de Piedra, Papel o Tijera. Dado que es un juego de suma cero, lo representamos solamente con las ganancias del jugador $1$. Además, para facilitar la lectura, nombramos las jugadas con $R$, $P$ y $S$ (por las iniciales en inglés).

\input{Tablas/matrizPiedraPapelTIjeras.tex}

En las tablas \ref{sfp:piedra:papel:tijera} y \ref{afp:piedra:papel:tijera} respectivamente podemos ver respectivamente un desarrollo de juego ficticio simultáneo y alternante. Para el caso simultáneo, el proceso comienza con el jugador fila jugando piedra y el columna jugando papel. Inmediatamente el jugador fila cambia su estrategia a jugar tijera, mientras el columna se mantiene en papel porque lo proyecta exitoso. En la tercera iteración el jugador $2$, esperando que el jugador $1$ juegue piedra o tijera con iguales probabilidades pero descartando que pueda jugar papel, maximizará su ganancia esperada jugando piedra. Estos cambios continuaran infinitamente pero lentamente, las creencias convergen al único equilibrio de Nash mixto de esto juego, que consiste en que cada jugador juegue cada acción con $\frac{1}{3}$ de probabilidad. \falta{ajustar tamaño de estas tablas}

\begin{table} % [h!]
    \centering
    \input{Tablas/sfp_rps.tex}
    \caption{Proceso de juego ficticio simultaneo sobre Piedra, Papel o Tijera}
    \label{sfp:piedra:papel:tijera}
\end{table}

El caso alternante es similar, aunque con una clara ventaja del jugador columna, que comienza ya reaccionando a la piedra del jugador fila con papel. Esta ventaja sin embargo va disminuyendo con el paso de las iteraciones y eventualmente también converge en creencias.


\begin{table} % [h!]
    \centering
    \input{Tablas/afp_rps.tex}
    \caption{Proceso de juego ficticio alternante sobre Piedra, Papel o Tijera}
    \label{afp:piedra:papel:tijera}
\end{table}

Veamos por último un ejemplo bien conocido en la literatura de juego ficticio.

\input{Tablas/matrizShapley.tex}

Este el juego de Shapley \cite{shapley:3x3}. Es muy conocido por por ser el primer ejemplo publicado de un juego que no converge, de forma pura ni mixta, tanto para juego ficticio simultáneo como alternante. En las tablas \ref{sfp:shapley} y \ref{afp:shapley} vemos como se desarrollan estos procesos.


\begin{table} % [h!]
    \centering
    \input{Tablas/sfp_shapley.tex}
    \caption{Proceso de juego ficticio simultaneo en el ejemplo de Shapley, comenzando por $(i_1, j_2)$.}
    \label{sfp:shapley}
\end{table}
\begin{table} % [h!]
    \centering
    \input{Tablas/afp_shapley.tex}
    \caption{Proceso de juego ficticio alternante en el ejemplo de Shapley, comenzando por $i_1$.}
    \label{afp:shapley}
\end{table}

